!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=57)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.store=e.globals=void 0;var n=r(43),o=r(40),i=u(r(25)),s=u(r(24));function u(t){return t&&t.__esModule?t:{default:t}}var c=new Image(512,128);c.src="./img/player.png";var a={debug:0,canvas:document.querySelector("canvas"),context:document.querySelector("canvas").getContext("2d"),subject:new n.Subject,sprite:c,player:{direction:5},speed:{x:0,y:5}};e.globals=a;var l=(0,o.combineReducers)({player:i.default,speed:s.default}),f=(0,o.createStore)(l,a);e.store=f,f.subscribe(function(){})},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(52),i=r(51),s=r(6),u=r(15),c=r(5),a=r(50),l=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this._parent,n=this._parents,l=this._unsubscribe,p=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var h=-1,d=n?n.length:0;r;)r.remove(this),r=++h<d&&n[h]||null;if(s.isFunction(l))u.tryCatch(l).call(this)===c.errorObject&&(e=!0,t=t||(c.errorObject.e instanceof a.UnsubscriptionError?f(c.errorObject.e.errors):[c.errorObject.e]));if(o.isArray(p))for(h=-1,d=p.length;++h<d;){var b=p[h];if(i.isObject(b))if(u.tryCatch(b.unsubscribe).call(b)===c.errorObject){e=!0,t=t||[];var y=c.errorObject.e;y instanceof a.UnsubscriptionError?t=t.concat(f(y.errors)):t.push(y)}}if(e)throw new a.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(n(e)){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var o=r;(r=new t)._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this._parent,r=this._parents;e&&e!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function f(t){return t.reduce(function(t,e){return t.concat(e instanceof a.UnsubscriptionError?e.errors:e)},[])}e.Subscription=l},function(t,e,r){"use strict";var n=r(8),o=r(53),i=r(49),s=r(48),u=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,i=o.toSubscriber(t,e,r);if(n?n.call(i,this.source):i.add(this.source||!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var r=this;if(e||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?e=n.root.Rx.config.Promise:n.root.Promise&&(e=n.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var o;o=r.subscribe(function(e){if(o)try{t(e)}catch(t){n(t),o.unsubscribe()}else t(e)},n,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[i.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:s.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?t=n.root.Rx.config.Promise:n.root.Promise&&(t=n.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,r){var n;e.subscribe(function(t){return n=t},function(t){return r(t)},function(){return t(n)})})},t.create=function(e){return new t(e)},t}();e.Observable=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,width:60,height:128,flipped:0},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n.context.drawImage(n.sprite,t.x,t.y,t.width,t.height,e-t.width/2,r-t.height/2,t.width/3,t.height/3),n.debug&&(n.context.strokeStyle=t.hit?"red":"green",n.context.strokeRect(e-t.width/2,r-t.height/2,t.width/3,t.height/3))};var n=r(0).store.getState()},function(t,e,r){"use strict";var n=r(8).root.Symbol;e.rxSubscriber="function"==typeof n&&"function"==typeof n.for?n.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},function(t,e,r){"use strict";e.errorObject={e:{}}},function(t,e,r){"use strict";e.isFunction=function(t){return"function"==typeof t}},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";(function(t){var r="undefined"!=typeof window&&window,n="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o=r||void 0!==t&&t||n;e.root=o,function(){if(!o)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,r(7))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];if(0===e.length)return function(t){return t};if(1===e.length)return e[0];return e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t);try{throw new Error(t)}catch(t){}}},function(t,e,r){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=((n=r(38))&&n.__esModule?n:{default:n}).default.Symbol;e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(r(39)),o=s(r(34)),i=s(r(32));function s(t){return t&&t.__esModule?t:{default:t}}var u="[object Object]",c=Function.prototype,a=Object.prototype,l=c.toString,f=a.hasOwnProperty,p=l.call(Object);var h=function(t){if(!(0,i.default)(t)||(0,n.default)(t)!=u)return!1;var e=(0,o.default)(t);if(null===e)return!0;var r=f.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==p};e.default=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,r,i){var c;"function"==typeof r&&void 0===i&&(i=r,r=void 0);if(void 0!==i){if("function"!=typeof i)throw new Error("Expected the enhancer to be a function.");return i(t)(e,r)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var a=e;var l=r;var f=[];var p=f;var h=!1;function d(){p===f&&(p=f.slice())}function b(){return l}function y(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var e=!0;return d(),p.push(t),function(){if(e){e=!1,d();var r=p.indexOf(t);p.splice(r,1)}}}function v(t){if(!(0,n.default)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(h)throw new Error("Reducers may not dispatch actions.");try{h=!0,l=a(l,t)}finally{h=!1}for(var e=f=p,r=0;r<e.length;r++){var o=e[r];o()}return t}v({type:u.INIT});return c={dispatch:v,subscribe:y,getState:b,replaceReducer:function(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");a=t,v({type:u.INIT})}},c[o.default]=function(){var t,e=y;return(t={subscribe:function(t){if("object"!==s(t))throw new TypeError("Expected the observer to be an object.");function r(){t.next&&t.next(b())}r();var n=e(r);return{unsubscribe:n}}})[o.default]=function(){return this},t},c},e.ActionTypes=void 0;var n=i(r(12)),o=i(r(31));function i(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u={INIT:"@@redux/INIT"};e.ActionTypes=u},function(t,e,r){"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},function(t,e,r){"use strict";var n,o=r(5);function i(){try{return n.apply(this,arguments)}catch(t){return o.errorObject.e=t,o.errorObject}}e.tryCatch=function(t){return n=t,i}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(6),s=r(1),u=r(14),c=r(4),a=function(t){function e(r,o,i){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=u.empty;break;case 1:if(!r){this.destination=u.empty;break}if("object"===n(r)){r instanceof e?(this.syncErrorThrowable=r.syncErrorThrowable,this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,r,o,i)}}return o(e,t),e.prototype[c.rxSubscriber]=function(){return this},e.create=function(t,r,n){var o=new e(t,r,n);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(s.Subscription);e.Subscriber=a;var l=function(t){function e(e,r,n,o){var s;t.call(this),this._parentSubscriber=e;var c=this;i.isFunction(r)?s=r:r&&(s=r.next,n=r.error,o=r.complete,r!==u.empty&&(c=Object.create(r),i.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this))),this._context=c,this._next=s,this._error=n,this._complete=o}return o(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,r){try{e.call(this._context,r)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(a)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=[{name:"ramp",x:1141,y:228,width:127,height:28,flipped:0}],o=r(0).store.getState();e.default=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.globals=o,this.moving=!1,this.speed=0,this.sprite=n,this.direction=0,this.position={x:this.globals.canvas.width*Math.random(),y:e||this.globals.canvas.height*Math.random()},this.hit=0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=[{name:"rock",x:1044,y:213,width:92,height:44,flipped:0}],o=r(0).store.getState();e.default=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.globals=o,this.moving=!1,this.speed=0,this.sprite=n,this.direction=0,this.position={x:this.globals.canvas.width*Math.random(),y:e||this.globals.canvas.height*Math.random()},this.hit=0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=[{name:"tree",x:925,y:129,width:112,height:127,flipped:0}],o=r(0).store.getState();e.default=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.globals=o,this.moving=!1,this.speed=0,this.sprite=n,this.direction=0,this.position={x:this.globals.canvas.width*Math.random(),y:e||this.globals.canvas.height*Math.random()},this.hit=0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(0),o=c(r(3)),i=c(r(19)),s=c(r(18)),u=c(r(17));function c(t){return t&&t.__esModule?t:{default:t}}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.obstacles=[]}var e,r,c;return e=t,(r=[{key:"init",value:function(){for(var t=0;t<10;t++)this.add()}},{key:"add",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=Math.random();e>.66?this.obstacles.push(new i.default(t)):e>.33?this.obstacles.push(new s.default(t)):this.obstacles.push(new u.default(t))}},{key:"draw",value:function(){var t=this;this.obstacles.forEach(function(e,r){e.position.y<=-100?(t.obstacles.splice(r,1),t.add(n.globals.canvas.height)):e.position.x<=0&&(t.obstacles.splice(r,1),t.add(e.position.y,n.globals.canvas.width));var i=n.store.getState();e.position.x-=i.speed.x,e.position.y-=i.speed.y;var s=n.globals.canvas.width-e.position.x,u=e.position.y;(0,o.default)(e.sprite[0],s,u)})}},{key:"update",value:function(){this.draw()}}])&&a(e.prototype,r),c&&a(e,c),t}();e.default=l},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/60;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=0,o=0;this.updateProxy=function(t){for((n+=(t-o)/1e3)>1&&(n=1);n>r;)e.update(r),n-=r;o=t,e.queue()}}var e,r,o;return e=t,(r=[{key:"queue",value:function(){requestAnimationFrame(this.updateProxy)}},{key:"start",value:function(){this.queue()}}])&&n(e.prototype,r),o&&n(e,o),t}();e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,o=r(0),i=(n=r(3))&&n.__esModule?n:{default:n};function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=[{name:"w3",x:492,y:131,width:90,height:128,flipped:1},{name:"w2",x:386,y:131,width:90,height:128,flipped:1},{name:"w1",x:280,y:131,width:82,height:128,flipped:1},{name:"sw2",x:158,y:131,width:87,height:128,flipped:1},{name:"sw1",x:88,y:131,width:64,height:128,flipped:1},{name:"normal",x:0,y:0,width:60,height:128,flipped:0},{name:"se1",x:88,y:0,width:64,height:128,flipped:0},{name:"se2",x:158,y:0,width:87,height:128,flipped:0},{name:"e1",x:275,y:0,width:91,height:128,flipped:1},{name:"e2",x:386,y:0,width:90,height:128,flipped:1},{name:"e3",x:492,y:0,width:90,height:128,flipped:1},{name:"jump",x:598,y:0,width:126,height:128,flipped:1},{name:"flip1",x:740,y:0,width:114,height:128,flipped:1},{name:"flip2",x:871,y:0,width:121,height:128,flipped:1},{name:"ouch",x:1008,y:0,width:124,height:128,flipped:1},{name:"getup",x:1146,y:0,width:123,height:128,flipped:1}],c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.globals=o.globals,this.moving=!1,this.speed=0,this.sprite=u,this.direction=this.globals.player.direction,this.position={x:this.globals.canvas.width/2,y:100},this.hit=0}var e,r,n;return e=t,(r=[{key:"draw",value:function(){var t=this.position.x;"ouch"==this.sprite[this.direction].name&&(t=this.position.x+this.sprite[this.direction].width/8),(0,i.default)(this.sprite[this.direction],t,this.position.y)}},{key:"update",value:function(){var t=o.store.getState();this.direction!==t.player.direction&&(this.direction=t.player.direction),this.draw()}}])&&s(e.prototype,r),n&&s(e,n),t}();e.default=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){window.addEventListener("keydown",function(t){var e=t.code;o.hasOwnProperty(e)&&o[e]()}),window.addEventListener("mousemove",function(t){var e={x:0,y:0};switch(!0){case t.clientX>=n.globals.canvas.width/2-100&&t.clientX<=n.globals.canvas.width/2+100:e.x=0;break;case t.clientX<=n.globals.canvas.width/4:e.x=3;break;case t.clientX<n.globals.canvas.width/2:e.x=2;break;case t.clientX>=3*n.globals.canvas.width/4:e.x=-3;break;case t.clientX>=n.globals.canvas.width/2:e.x=-2;break;default:e.x=0}switch(!0){case t.clientY<=100&&t.clientY>=0:e.y=0;break;case t.clientY<=2*n.globals.canvas.height/4&&t.clientY>=n.globals.canvas.height/4:e.y=3;break;case t.clientY<=3*n.globals.canvas.height/4&&0!==e.x:e.y=4;break;default:e.y=5}n.store.dispatch({type:"PLAYER_MOUSEMOVE",payload:e})})};var n=r(0),o={ArrowRight:function(t){n.store.dispatch({type:"PLAYER_MOVE",payload:1})},ArrowLeft:function(t){n.store.dispatch({type:"PLAYER_MOVE",payload:-1})},ArrowDown:function(t){n.store.dispatch({type:"PLAYER_MOVE",payload:5})}}},function(t,e,r){"use strict";function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){o(t,e,r[e])})}return t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GAME_START":t=n({},t,{started:e.payload});break;case"PLAYER_MOVE":var r=Math.min(Math.max(t.x-e.payload,-5),5),o=Math.min(Math.max(5-Math.abs(r),0),5);5==e.payload?(r=0,o=5):2==o&&(o=0),t=n({},t,{x:r,y:o});break;case"PLAYER_MOUSEMOVE":var i=e.payload.x,s=e.payload.y?Math.min(Math.max(5-Math.abs(i),0),5):0;t=n({},t,{x:i,y:s});break;case"PLAYER_HIT":t=n({},t,{x:0,y:0})}return t}},function(t,e,r){"use strict";function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){o(t,e,r[e])})}return t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GAME_START":t=n({},t,{started:e.payload});break;case"GAME_OVER":t=n({},t,{ended:e.payload});break;case"UPDATE_SCORE":var r=e.payload?t.score+e.payload:e.payload;t=n({},t,{score:r});break;case"PLAYER_MOVE":var o=t.direction+e.payload;5==e.payload?o=e.payload:o<0?o=2:o>10&&(o=8),t=n({},t,{direction:o});break;case"PLAYER_MOUSEMOVE":var i=5;switch(!0){case 3==e.payload.x:i=3;break;case 2==e.payload.x:i=4;break;case-2==e.payload.x:i=6;break;case-3==e.payload.x:i=7;break;default:i=5}0==e.payload.y&&(i=0==e.payload.x?5:e.payload.x>0?2:8),t=n({},t,{direction:i});break;case"PLAYER_HIT":t=n({},t,{hit:e.payload,direction:14})}return t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){return function(r,n,s){var u=t(r,n,s),c=u.dispatch,a=[],l={getState:u.getState,dispatch:function(t){return c(t)}};return a=e.map(function(t){return t(l)}),c=o.default.apply(void 0,a)(u.dispatch),i({},u,{dispatch:c})}}};var n,o=(n=r(9))&&n.__esModule?n:{default:n};var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return function(){return e(t.apply(void 0,arguments))}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if("function"==typeof t)return o(t,e);if("object"!==n(t)||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":n(t))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(t),i={},s=0;s<r.length;s++){var u=r[s],c=t[u];"function"==typeof c&&(i[u]=o(c,e))}return i}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e=Object.keys(t),r={},o=0;o<e.length;o++){var s=e[o];0,"function"==typeof t[s]&&(r[s]=t[s])}var u=Object.keys(r);0;var c=void 0;try{!function(t){Object.keys(t).forEach(function(e){var r=t[e],o=r(void 0,{type:n.ActionTypes.INIT});if(void 0===o)throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");var i="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if(void 0===r(void 0,{type:i}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+n.ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(r)}catch(t){c=t}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(c)throw c;for(var n=!1,o={},s=0;s<u.length;s++){var a=u[s],l=r[a],f=t[a],p=l(f,e);if(void 0===p){var h=i(a,e);throw new Error(h)}o[a]=p,n=n||p!==f}return n?o:t}};var n=r(13);o(r(12)),o(r(10));function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var r=e&&e.type;return"Given action "+(r&&'"'+r.toString()+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,r=t.Symbol;"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable";return e}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,i,s=(o=r(29))&&o.__esModule?o:{default:o};i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:n;var u=(0,s.default)(i);e.default=u}).call(this,r(7),r(30)(t))},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(t){return null!=t&&"object"==n(t)};e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t,e){return function(r){return t(e(r))}};e.default=n},function(t,e,r){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=(0,((n=r(33))&&n.__esModule?n:{default:n}).default)(Object.getPrototypeOf,Object);e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Object.prototype.toString;var o=function(t){return n.call(t)};e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,o=(n=r(11))&&n.__esModule?n:{default:n};var i=Object.prototype,s=i.hasOwnProperty,u=i.toString,c=o.default?o.default.toStringTag:void 0;var a=function(t){var e=s.call(t,c),r=t[c];try{t[c]=void 0;var n=!0}catch(t){}var o=u.call(t);return n&&(e?t[c]=r:delete t[c]),o};e.default=a},function(t,e,r){"use strict";(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n="object"==(void 0===t?"undefined":r(t))&&t&&t.Object===Object&&t;e.default=n}).call(this,r(7))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,o=(n=r(37))&&n.__esModule?n:{default:n};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s="object"==("undefined"==typeof self?"undefined":i(self))&&self&&self.Object===Object&&self,u=o.default||s||Function("return this")();e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(r(11)),o=s(r(36)),i=s(r(35));function s(t){return t&&t.__esModule?t:{default:t}}var u="[object Null]",c="[object Undefined]",a=n.default?n.default.toStringTag:void 0;var l=function(t){return null==t?void 0===t?c:u:a&&a in Object(t)?(0,o.default)(t):(0,i.default)(t)};e.default=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"createStore",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"combineReducers",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"bindActionCreators",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"applyMiddleware",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"compose",{enumerable:!0,get:function(){return u.default}});var n=c(r(13)),o=c(r(28)),i=c(r(27)),s=c(r(26)),u=c(r(9));c(r(10));function c(t){return t&&t.__esModule?t:{default:t}}},function(t,e,r){"use strict";var n=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(e,r){t.call(this),this.subject=e,this.subscriber=r,this.closed=!1}return n(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},e}(r(1).Subscription);e.SubjectSubscription=o},function(t,e,r){"use strict";var n=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return n(e,t),e}(Error);e.ObjectUnsubscribedError=o},function(t,e,r){"use strict";var n=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(2),i=r(16),s=r(1),u=r(42),c=r(41),a=r(4),l=function(t){function e(e){t.call(this,e),this.destination=e}return n(e,t),e}(i.Subscriber);e.SubjectSubscriber=l;var f=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return n(e,t),e.prototype[a.rxSubscriber]=function(){return new l(this)},e.prototype.lift=function(t){var e=new p(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new u.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new u.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new u.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(t.complete(),s.Subscription.EMPTY):(this.observers.push(t),new c.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new o.Observable;return t.source=this,t},e.create=function(t,e){return new p(t,e)},e}(o.Observable);e.Subject=f;var p=function(t){function e(e,r){t.call(this),this.destination=e,this.source=r}return n(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):s.Subscription.EMPTY},e}(f);e.AnonymousSubject=p},function(t,e,r){"use strict";var n=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(2),i=r(15),s=r(6),u=r(5),c=r(1),a=Object.prototype.toString;var l=function(t){function e(e,r,n,o){t.call(this),this.sourceObj=e,this.eventName=r,this.selector=n,this.options=o}return n(e,t),e.create=function(t,r,n,o){return s.isFunction(n)&&(o=n,n=void 0),new e(t,r,o,n)},e.setupSubscription=function(t,r,n,o,i){var s;if(function(t){return!!t&&"[object NodeList]"===a.call(t)}(t)||function(t){return!!t&&"[object HTMLCollection]"===a.call(t)}(t))for(var u=0,l=t.length;u<l;u++)e.setupSubscription(t[u],r,n,o,i);else if(function(t){return!!t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){var f=t;t.addEventListener(r,n,i),s=function(){return f.removeEventListener(r,n,i)}}else if(function(t){return!!t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){var p=t;t.on(r,n),s=function(){return p.off(r,n)}}else{if(!function(t){return!!t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t))throw new TypeError("Invalid event target");var h=t;t.addListener(r,n),s=function(){return h.removeListener(r,n)}}o.add(new c.Subscription(s))},e.prototype._subscribe=function(t){var r=this.sourceObj,n=this.eventName,o=this.options,s=this.selector,c=s?function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var n=i.tryCatch(s).apply(void 0,e);n===u.errorObject?t.error(u.errorObject.e):t.next(n)}:function(e){return t.next(e)};e.setupSubscription(r,n,c,t,o)},e}(o.Observable);e.FromEventObservable=l},function(t,e,r){"use strict";var n=r(44);e.fromEvent=n.FromEventObservable.create},function(t,e,r){"use strict";var n=r(2),o=r(45);n.Observable.fromEvent=o.fromEvent},function(t,e,r){"use strict";e.noop=function(){}},function(t,e,r){"use strict";var n=r(47);function o(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:n.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return o(t)},e.pipeFromArray=o},function(t,e,r){"use strict";var n=r(8);function o(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}e.getSymbolObservable=o,e.observable=o(n.root),e.$$observable=e.observable},function(t,e,r){"use strict";var n=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(e){t.call(this),this.errors=e;var r=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return n(e,t),e}(Error);e.UnsubscriptionError=o},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.isObject=function(t){return null!=t&&"object"===n(t)}},function(t,e,r){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e,r){"use strict";var n=r(16),o=r(4),i=r(14);e.toSubscriber=function(t,e,r){if(t){if(t instanceof n.Subscriber)return t;if(t[o.rxSubscriber])return t[o.rxSubscriber]()}return t||e||r?new n.Subscriber(t,e,r):new n.Subscriber(i.empty)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(2);r(46);var o=r(0),i=(a(r(3)),a(r(23))),s=a(r(22)),u=a(r(21)),c=a(r(20));function a(t){return t&&t.__esModule?t:{default:t}}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.store=o.store.getState(),this.scale=48,this.fullWidth=window.innerWidth,this.fullHeight=window.innerHeight,this.player=new s.default,this.animate=new u.default(1/60),this.obstacles=new c.default}var e,r,a;return e=t,(r=[{key:"init",value:function(){var t=this;this.resizeCanvas(),n.Observable.fromEvent(window,"resize").subscribe(function(e){t.resizeCanvas()}),this.player.position.x=o.globals.canvas.width/2,this.animate.update=function(e){0!==t.store.speed.y&&(t.fillArea(),t.player.update(e),t.obstacles.update(e),t.hitTest())},this.animate.start(),this.obstacles.init(),this.hitTest(),(0,i.default)()}},{key:"hitTest",value:function(){var t=[{x:this.player.position.x-this.player.sprite[this.player.direction].width/2,y:this.player.position.y-this.player.sprite[this.player.direction].height/2},{x:this.player.position.x-this.player.sprite[this.player.direction].width/2+this.player.sprite[this.player.direction].width/3,y:this.player.position.y-this.player.sprite[this.player.direction].height/2+this.player.sprite[this.player.direction].height/3}];this.obstacles.obstacles.forEach(function(e){var r=[{x:o.globals.canvas.width-e.position.x-e.sprite[0].width/2,y:e.position.y-e.sprite[0].height/2},{x:o.globals.canvas.width-e.position.x-e.sprite[0].width/2+e.sprite[0].width/3,y:e.position.y-e.sprite[0].height/2+e.sprite[0].height/3}];(t[0].x<=r[0].x&&t[1].x>=r[0].x||t[1].x>=r[0].x&&t[0].x<=r[1].x)&&(t[0].y<=r[0].y&&t[1].y>=r[0].y||t[1].y>=r[0].y&&t[0].y<=r[1].y)&&"ramp"!==e.sprite[0].name&&o.store.dispatch({type:"PLAYER_HIT",payload:1})})}},{key:"resizeCanvas",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.innerWidth,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.innerHeight;o.globals.canvas.width=t,o.globals.canvas.height=e,this.player.update(),this.obstacles.update(),this.debug()}},{key:"fillArea",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rgba(255,255,255,1)",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.innerWidth,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window.innerHeight;o.globals.context.fillStyle=t,o.globals.context.fillRect(e,r,n,i)}},{key:"debug",value:function(){for(var t=o.globals.canvas.width-this.fullWidth,e=-this.scale;t<this.fullWidth;){Math.min(Math.abs(t),255);this.fillArea("rgba(255,0,0,.1)",t,0,1,o.globals.canvas.height),t+=this.scale}for(;e<this.fullHeight;)this.fillArea("rgba(100,0,0,.1)",0,e,o.globals.canvas.width,1),e+=this.scale}}])&&l(e.prototype,r),a&&l(e,a),t}();e.default=f},function(t,e,r){"use strict";var n;(new(((n=r(54))&&n.__esModule?n:{default:n}).default)).init()},function(t,e,r){"use strict";r(55),r(62)},function(t,e,r){t.exports=r(56)},,,,,function(t,e){}]);
//# sourceMappingURL=script.min.js.map